<div class="leave-background-color">
    <div class="modal-leave" id="modal-leave">
        <form id="modal-form" class="modal-form" onsubmit="handleSubmit(event)">
            <h2 class="title title-for-leave">LEAVE A REVIEW <span class="title title-span2">ABOUT</span> <span
                    class="title-exception">OUR CHOCOLATE</span></h2>
            <button type="button" class="close-button btn-close-leave close-leave">
                <svg width="24" height="24" class="close-icon">
                    <use width="12" height="12" href="/img/symbol-defs.svg#icon-x-close"></use>
                </svg>
            </button>
            <div class="buy-now-form-field">
                <label class="buy-now-info" for="personal-info"><span></span>
                    <div class="modal-input surname">
    
                        <input class="modal-input surname" type="text" id="name-leave" name="name" placeholder="Name"
                            pattern="[a-zA-Zа-яА-Я]+" minlength="2" required>
    
                    </div>
                </label>
            </div>
            <div class="buy-now-form-field">
                <label class="buy-now-info" for="email">
    
                    <input class="modal-input surname" type="email" id="email-leave" name="email" placeholder="Email"
                        pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/" required>
    
                </label>
            </div>
            <div class="buy-now-form-field">
                <label class="buy-now-info" for="phone"><span></span>
    
                    <input class="modal-input input-text input-phone" type="tel" id="tel-leave" name="tel tel-leave"
                        pattern="[0-9\s]{13,19}" placeholder="Phone number" maxlength="9" autocomplete="off" required>
    
                    <span class="buy-now-input-svg-phone form-leave-number">
                        <svg width="24" height="18">
                            <use href="/img/symbol-defs.svg#icon-ukraine"></use>
                        </svg>
                        <span class="buy-now-phone-maska">+380</span>
                    </span>
                </label>
            </div>
    
            <div class="buy-now-form-field">
                <label class="buy-now-info" for="phone"><span></span>
                    <textarea class="modal-form textarea input-text" name="comment" placeholder="Enter text"></textarea>
                </label>
            </div>
            <button id="toggle-btn-send" class="modal-btn submit" type="submit">Send</button>
        </form>
    </div>
</div>

    <script>
        !(function (e) {
                'function' != typeof e.matches &&
                    (e.matches =
                        e.msMatchesSelector ||
                        e.mozMatchesSelector ||
                        e.webkitMatchesSelector ||
                        function (e) {
                            for (
                                var t = this,
                                o = (t.document || t.ownerDocument).querySelectorAll(e),
                                n = 0;
                                o[n] && o[n] !== t;

                            )
                                ++n;
                            return Boolean(o[n]);
                        }),
                    'function' != typeof e.closest &&
                    (e.closest = function (e) {
                        for (var t = this; t && 1 === t.nodeType;) {
                            if (t.matches(e)) return t;
                            t = t.parentNode;
                        }
                        return null;
                    });
            })(window.Element.prototype);

            document.addEventListener('DOMContentLoaded', function () {
                /* Записываем в переменные массив элементов-кнопок и подложку.
                    Подложке зададим id, чтобы не влиять на другие элементы с классом overlay*/
                var modalButtons = document.querySelectorAll('.js-open-modal'),
                    overlay = document.querySelector('.js-overlay-modal'),
                    closeButtons = document.querySelectorAll('.js-modal-close');

                /* Перебираем массив кнопок */
                modalButtons.forEach(function (item) {
                    /* Назначаем каждой кнопке обработчик клика */
                    item.addEventListener('click', function (e) {
                        /* Предотвращаем стандартное действие элемента. Так как кнопку разные
                              люди могут сделать по-разному. Кто-то сделает ссылку, кто-то кнопку.
                              Нужно подстраховаться. */
                        e.preventDefault();

                        /* При каждом клике на кнопку мы будем забирать содержимое атрибута data-modal
                              и будем искать модальное окно с таким же атрибутом. */
                        var modalId = this.getAttribute('data-modal'),
                            modalElem = document.querySelector(
                                '.modal[data-modal="' + modalId + '"]'
                            );

                        /* После того как нашли нужное модальное окно, добавим классы
                              подложке и окну чтобы показать их. */
                        modalElem.classList.add('active');
                        overlay.classList.add('active');
                    }); // end click
                }); // end foreach

                closeButtons.forEach(function (item) {
                    item.addEventListener('click', function (e) {
                        var parentModal = this.closest('.modal');

                        parentModal.classList.remove('active');
                        overlay.classList.remove('active');
                    });
                }); // end foreach

                document.body.addEventListener(
                    'keyup',
                    function (e) {
                        var key = e.keyCode;

                        if (key == 27) {
                            document.querySelector('.modal.active').classList.remove('active');
                            document.querySelector('.overlay').classList.remove('active');
                        }
                    },
                    false
                );

                overlay.addEventListener('click', function () {
                    document.querySelector('.modal.active').classList.remove('active');
                    this.classList.remove('active');
                });
            }); // end ready

            const anchors = document.querySelectorAll('a[href*="#"]')

            const offset = 50 // значение смещения, которое вы хотите применить
            for (let anchor of anchors) {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault()
                    const blockID = anchor.getAttribute('href').substr(1)
                    const targetElement = document.getElementById(blockID)
                    const topPos = targetElement.getBoundingClientRect().top + window.pageYOffset
                    window.scrollTo({
                        top: topPos - offset,
                        behavior: 'smooth'
                    })
                })
            }
        

    </script>